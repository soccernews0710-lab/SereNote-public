// app/index.tsx
import { LinearGradient } from 'expo-linear-gradient';
import { useRouter } from 'expo-router';
import React, { useEffect, useMemo } from 'react';
import { SafeAreaView, StyleSheet, Text, View } from 'react-native';
import { useUserSettings } from '../hooks/useUserSettings';

const ENCOURAGE_MESSAGES: string[] = [
  "ä»Šæ—¥ã¯ã“ã“ã¾ã§æ¥ã‚ŒãŸã ã‘ã§ååˆ†ãˆã‚‰ã„ã§ã™ã€‚",
  "å…¨éƒ¨ãã¡ã‚“ã¨æ›¸ã‘ãªãã¦ã‚‚å¤§ä¸ˆå¤«ã€‚å°‘ã—ã ã‘ã§ã‚‚OKã€‚",
  "ä»Šã®ã‚ãªãŸã«ã§ãã‚‹ç¯„å›²ã§ã€ã‚†ã£ãã‚Šé€²ã‚ã‚Œã°ã„ã„ã‚ˆã€‚",
  "é ‘å¼µã‚‰ãªãã¦ã‚‚ã„ã„æ—¥ãŒã‚ã£ã¦å¤§ä¸ˆå¤«ã€‚",
  "å‘¼å¸ã—ã¦ã‚‹ã ã‘ã§ã€ä»Šæ—¥ã¯å¤§æˆåŠŸã§ã™ã€‚",
  "ç–²ã‚Œã¦ã„ã‚‹ã®ã¯ã€ãã‚Œã ã‘é ‘å¼µã£ãŸè¨¼æ‹ ã§ã™ã€‚",
  "ã‚ãªãŸãŒæ€ã£ã¦ã„ã‚‹ã‚ˆã‚Šã€ãšã£ã¨ã‚ˆãã‚„ã£ã¦ã„ã¾ã™ã€‚",
  "ã—ã‚“ã©ã„æ—¥ã¯ã€ãŸã ç”Ÿãã¦ã‚‹ã ã‘ã§åˆæ ¼ã§ã™ã€‚",
  "ã©ã‚“ãªæ°—æŒã¡ã‚‚ã€ã‚ãªãŸã®å¤§åˆ‡ãªä¸€éƒ¨ã§ã™ã€‚",
  "å°‘ã—ã§ã‚‚æ›¸ã“ã†ã¨ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚",
  "ä»Šæ—¥ã¯ä¼‘ã‚“ã§ã‚‚ã„ã„ã‚ˆã€‚ç„¡ç†ã—ãªãã¦å¤§ä¸ˆå¤«ã€‚",
  "æ°—åˆ†ã®æ³¢ãŒã‚ã£ã¦ã‚‚ã€ãã‚Œã¯è‡ªç„¶ãªã“ã¨ã€‚",
  "ã†ã¾ãã„ã‹ãªã„æ—¥ãŒã‚ã£ã¦ã‚‚å¤§ä¸ˆå¤«ã€‚",
  "å®Œç’§ã˜ã‚ƒãªãã¦ã„ã„ã€‚ç¶šã‘ã‚ˆã†ã¨ã™ã‚‹ã ã‘ã§ååˆ†ã§ã™ã€‚",
  "ã‚ãªãŸã®ãƒšãƒ¼ã‚¹ã§å¤§ä¸ˆå¤«ã§ã™ã€‚",
  "å°ã•ãªä¸€æ­©ãŒã€ç©ã¿é‡ã­ã‚‹ã¨å¤§ããªå¤‰åŒ–ã«ãªã‚‹ã‚ˆã€‚",
  "ä»Šæ—¥ã¯è‡ªåˆ†ã‚’ç”˜ã‚„ã‹ã—ã¦ã‚‚ã„ã„æ—¥ã§ã™ã€‚",
  "ã—ã£ã‹ã‚Šä¼‘ã‚€ã“ã¨ã‚‚ã€ç«‹æ´¾ãªå‰é€²ã§ã™ã€‚",
  "ç„¦ã‚‰ãªãã¦ã„ã„ã€‚ã²ã¨ã¤ãšã¤ã§å¤§ä¸ˆå¤«ã€‚",
  "é ‘å¼µã‚Šã™ããªã„ã§ã­ã€‚ã‚‚ã†ååˆ†é ‘å¼µã£ã¦ã‚‹ã‹ã‚‰ã€‚",
  "ã‚†ã£ãã‚Šã§ã„ã„ã€‚æ­¢ã¾ã£ã¦ã‚‚ã„ã„ã‚ˆã€‚",
  "ã‚ãªãŸã®æ°—æŒã¡ã«å¯„ã‚Šæ·»ã£ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚",
  "ä»Šæ—¥ã¯è‡ªåˆ†ã‚’è²¬ã‚ãªãã¦ã„ã„ã‚ˆã€‚",
  "æ°—åˆ†ãŒé‡ã„ã¨ãã¯ã€è»½ã„è¡Œå‹•ã ã‘ã§OKã€‚",
  "ã—ã‚“ã©ã„ã®ã¯å¼±ã„ã‹ã‚‰ã˜ã‚ƒãªãã¦ã€ãšã£ã¨é ‘å¼µã£ã¦ããŸã‹ã‚‰ã ã‚ˆã€‚",
  "ä»Šæ—¥ã‚’ä¹—ã‚Šè¶Šãˆã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚",
  "ã¾ã ã‚„ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã£ã¦æ€ãˆãªãã¦ã‚‚å¤§ä¸ˆå¤«ã€‚",
  "æ³£ã‘ã‚‹ã®ã¯æ‚ªã„ã“ã¨ã˜ã‚ƒãªã„ã‚ˆã€‚",
  "ã¡ã‚ƒã‚“ã¨ä¼‘æ†©ã§ãã¦ã‚‹ï¼Ÿ ç„¡ç†ã—ãªã„ã§ã­ã€‚",
  "å¼±ã•ã‚’è¦‹ã›ã‚‰ã‚Œã‚‹ã®ã¯å¼·ã•ã ã‚ˆã€‚",
  "ä»Šæ—¥ã¯è‡ªåˆ†ã®æ°—æŒã¡ã‚’å„ªå…ˆã—ã¦ã„ã„æ—¥ã§ã™ã€‚",
  "ã‚†ã£ãã‚Šæ·±å‘¼å¸ã—ã¦ã­ã€‚å¤§ä¸ˆå¤«ã€å¤§ä¸ˆå¤«ã€‚",
  "ãŸã¾ã«ã¯ç«‹ã¡æ­¢ã¾ã£ã¦ã‚‚ã„ã„ã‚ˆã€‚",
  "å®Œç’§ã˜ã‚ƒãªã„æ—¥ã‚‚ã€ã‚ãªãŸã«ã¨ã£ã¦ã¯å¤§åˆ‡ãª1æ—¥ã§ã™ã€‚",
  "è¾›ã„æ°—æŒã¡ã‚’æ„Ÿã˜ã¦ã„ã‚‹ã‚ãªãŸã‚’è²¬ã‚ãªã„ã§ã€‚",
  "ä»Šæ—¥ã“ã“ã«æ¥ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚",
  "ã‚ãªãŸã®åŠªåŠ›ã¯ã€èª°ãŒè¦‹ã¦ã„ãªãã¦ã‚‚ç¢ºã‹ã«å­˜åœ¨ã—ã¾ã™ã€‚",
  "å…ƒæ°—ãŒãªã„ã¨ãã¯ã€ã‚†ã£ãã‚Šéã”ã™è¨±å¯ã‚’è‡ªåˆ†ã«ã‚ã’ã¦ã­ã€‚",
  "ã€Œã§ããªã‹ã£ãŸã“ã¨ã€ã‚ˆã‚Šã€Œä»Šæ—¥ã“ã“ã«æ¥ãŸã“ã¨ã€ã‚’è¤’ã‚ã¦ã‚ã’ã¦ã€‚",
  "ã‚ãªãŸã®æ°—æŒã¡ã‚’å¤§åˆ‡ã«ã—ã¦ã„ã„ã‚“ã ã‚ˆã€‚",
  "è‹¦ã—ã„æ°—æŒã¡ã«æ°—ã¥ã‘ãŸã‚ãªãŸã¯å‰ã„ã§ã™ã€‚",
  "ã©ã‚“ãªèª¿å­ã®æ—¥ã§ã‚‚ã€ã‚ãªãŸã¯ã‚ãªãŸã®ã¾ã¾ã§å¤§ä¸ˆå¤«ã€‚",
  "å°‘ã—ä¼‘ã‚“ã ã‚‰ã€ã¾ãŸæ­©ã‘ã‚‹ã‚ˆã€‚",
  "å¿ƒãŒç–²ã‚Œã¦ã‚‹ã ã‘ã§ã€ã‚ãªãŸã«ä¾¡å€¤ãŒãªã„ã‚ã‘ã˜ã‚ƒãªã„ã‚ˆã€‚",
  "ã—ã‚“ã©ã„æ™‚ã¯ã€ã‚†ã£ãã‚Šã€ã‚†ã£ãã‚Šã§ã„ã„ã€‚",
  "ã§ããªã‹ã£ãŸã“ã¨ã‚ˆã‚Šã€ã§ããŸå°ã•ãªã“ã¨ã‚’å¤§åˆ‡ã«ã—ã¦ã­ã€‚",
  "ä»Šæ—¥ã¯ä½•ã‚‚ã—ãªãã¦ã‚‚ã„ã„ã‚ˆã€‚",
  "ã‚ãªãŸã®ãŠã‹ã’ã§ä»Šæ—¥ãŒå§‹ã¾ã£ãŸã‚ˆã€‚ã‚ã‚ŠãŒã¨ã†ã€‚",
  "è½ã¡ç€ã‹ãªãã¦ã‚‚å¤§ä¸ˆå¤«ã€‚ãã†ã„ã†æ—¥ã‚‚ã‚ã‚‹ã‚ˆã€‚",
  "ä»Šæ—¥ã¯ã€æ°—æ¥½ã«éã”ã—ã¦ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã€‚",
  "å°‘ã—ç¬‘ãˆãŸã‚‰ã€ãã‚Œã ã‘ã§ç´ æ™´ã‚‰ã—ã„ã‚ˆã€‚",
  "æ°—åˆ†ãŒæ™´ã‚Œãªãã¦ã‚‚ã€è‡ªåˆ†ã‚’è²¬ã‚ãªã„ã§ã­ã€‚",
  "ã€Œä»Šæ—¥ã¯ç„¡ç†ã€ã£ã¦è¨€ãˆã‚‹ã®ã¯å‹‡æ°—ã ã‚ˆã€‚",
  "è‡ªåˆ†ã®å¿ƒã‚’å®ˆã‚‹ã“ã¨ã‚’æœ€å„ªå…ˆã«ã—ã¦ã„ã„ã‚ˆã€‚",
  "ã„ã¤ã‚‚é€šã‚Šã«ã§ããªãã¦ã‚‚ã€ãã‚ŒãŒæ™®é€šã ã‚ˆã€‚",
  "ã‚ãªãŸã®æ°—æŒã¡ã¯ã€èª°ã‹ã«å¤§åˆ‡ã«ã•ã‚Œã‚‹ä¾¡å€¤ãŒã‚ã‚‹ã‚‚ã®ã§ã™ã€‚",
  "è¾›ã„ã®ã«é ‘å¼µã£ã¦ããŸã‚ãªãŸã€æœ¬å½“ã«ã™ã”ã„ã‚ˆã€‚",
  "ä»Šæ—¥ã‚‚ç”Ÿãã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚",
  "å…ƒæ°—ã˜ã‚ƒãªãã¦ã‚‚ã„ã„ã€‚ã‚ãªãŸã¯ãã®ã¾ã¾ã§å¤§äº‹ãªå­˜åœ¨ã ã‚ˆã€‚",
  "æ‰‹æ”¾ã™ã“ã¨ã‚‚å‰ã«é€²ã‚€ã“ã¨ã®ã²ã¨ã¤ã ã‚ˆã€‚",
  "ç–²ã‚ŒãŸã‚‰ã€è¿·ã‚ãšä¼‘ã‚“ã§ã„ã„ã€‚",
  "ä½•ã‚‚ã—ã¦ã„ãªã„ã‚ˆã†ã«è¦‹ãˆã¦ã‚‚ã€å¿ƒã¯é ‘å¼µã£ã¦ã‚‹ã‚ˆã€‚",
  "ã‚†ã£ãã‚Šè‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§é€²ã‚“ã§ã­ã€‚",
  "ã©ã‚“ãªæ°—åˆ†ã®æ—¥ã‚‚ã€ã‚ãªãŸã¯ä¸€äººã˜ã‚ƒãªã„ã‚ˆã€‚",
  "ä»Šæ—¥ã¯ã„ã¤ã‚‚ã‚ˆã‚Šè‡ªåˆ†ã«å„ªã—ãã—ã¦ã‚ã’ã¦ã­ã€‚",
  "æ°—æŒã¡ã‚’è¨€è‘‰ã«ã—ã‚ˆã†ã¨ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚",
  "ã‚ãªãŸã¯ã¡ã‚ƒã‚“ã¨ã€ã‚ãªãŸã®ã¾ã¾ã§é ‘å¼µã£ã¦ã‚‹ã€‚",
  "ä»Šæ—¥ãŒå°‘ã—ã§ã‚‚æ¥½ã«ãªã‚Šã¾ã™ã‚ˆã†ã«ã€‚",
  "ã†ã¾ãã„ã‹ãªã„æ—¥ã‚‚ã€ã‚ãªãŸã«ã¨ã£ã¦å¤§åˆ‡ãªä¸€æ—¥ã§ã™ã€‚",
  "å¿ƒã®ç—›ã¿ã‚’ç„¡è¦–ã—ãªãã¦ã„ã„ã‚ˆã€‚",
  "å°‘ã—ä¼‘ã‚“ã§ã‚‚å…¨ç„¶é…ã‚Œãªã„ã‚ˆã€‚",
  "ã€Œã—ã‚“ã©ã„ã€ã¨æ€ã†ã ã‘ã§ååˆ†ãŒã‚“ã°ã£ã¦ã‚‹è¨¼æ‹ ã€‚",
  "ã‚ãªãŸã®æ­©å¹…ã§å¤§ä¸ˆå¤«ã€‚å‘¨ã‚Šã¨æ¯”ã¹ãªãã¦ã„ã„ã‚ˆã€‚",
  "æ°—åˆ†ãŒæºã‚Œã‚‹ã®ã¯æ‚ªã„ã“ã¨ã˜ã‚ƒãªã„ã‚ˆã€‚",
  "ã¡ã‚ƒã‚“ã¨ã“ã“ã¾ã§é€²ã‚“ã§ã‚‹ã‹ã‚‰å®‰å¿ƒã—ã¦ã­ã€‚",
  "å¿ƒã«ä½™è£•ãŒãªã„ã¨ãã¯ã€ä½•ã‚‚ã§ããªãã¦å½“ç„¶ã ã‚ˆã€‚",
  "ä»Šæ—¥ã¯ã‚†ã£ãã‚Šéã”ã—ã¦ã„ã„ã‚ˆã€‚",
  "ã©ã‚Œã ã‘å°ã•ãªå‰é€²ã§ã‚‚ã€ãã‚Œã¯ç¢ºã‹ãªå‰é€²ã§ã™ã€‚",
  "ä¼‘ã‚€ã“ã¨ã‚‚åŠªåŠ›ã®ã†ã¡ã ã‚ˆã€‚",
  "ä½•ã‚‚ã§ããªã„æ—¥ãŒã‚ã£ã¦ã‚‚å¤§ä¸ˆå¤«ã€‚",
  "ã‚ãªãŸãŒæ„Ÿã˜ã¦ã„ã‚‹ã“ã¨ã¯å…¨éƒ¨å¤§åˆ‡ãªã‚µã‚¤ãƒ³ã ã‚ˆã€‚",
  "ã¡ã‚‡ã£ã¨ã®é–“ã€è‡ªåˆ†ã‚’è¨±ã—ã¦ä¼‘ã‚‚ã£ã‹ã€‚",
  "ä»Šã¯ã‚†ã£ãã‚Šã§å¤§ä¸ˆå¤«ã€‚ç„¡ç†ã—ãªã„ã§ã­ã€‚",
  "ã‚ãªãŸã¯ååˆ†ã™ãã‚‹ãã‚‰ã„é ‘å¼µã£ã¦ã‚‹ã‚ˆã€‚",
  "æ°—æŒã¡ãŒè¿½ã„ã¤ã‹ãªã„æ—¥ã¯ã€å„ªã—ãæŠ±ãã—ã‚ã¦ã‚ã’ã¦ã­ã€‚",
  "ç„¦ã‚‰ãšã€ã‚†ã£ãã‚Šã€è‡ªåˆ†ã®ãŸã‚ã«æ™‚é–“ã‚’ä½¿ã£ã¦ã„ã„ã‚ˆã€‚",
  "ä¼‘ã‚€å‹‡æ°—ã‚‚ã€ç«‹æ´¾ãªåŠ›ã®ã²ã¨ã¤ã€‚",
  "ã‚ãªãŸã¯ä»Šæ—¥ã‚‚ç”Ÿãã¦ã‚‹ã€‚ãã‚Œã ã‘ã§ä¾¡å€¤ãŒã‚ã‚‹ã‚ˆã€‚",
  "ã¤ã‚‰ã„æ°—æŒã¡ã‚’æŠ±ãˆãªãŒã‚‰ã€ãã‚Œã§ã‚‚å‰ã«é€²ã‚‚ã†ã¨ã—ã¦ã‚‹ã‚ãªãŸã¯ã™ã”ã„ã€‚",
  "ä»Šæ—¥ã“ã“ã«ã„ã‚‹ã“ã¨ã€ãã‚ŒãŒã‚‚ã†ååˆ†ãªé€²æ­©ã ã‚ˆã€‚",
  "ä½•ã‚‚ã§ãã¦ã„ãªã„ãªã‚“ã¦æ€ã‚ãªãã¦ã„ã„ã€‚å‘¼å¸ã—ã¦ã‚‹ã ã‘ã§OKã€‚",
  "ã‚ãªãŸã¯ä¸€äººã˜ã‚ƒãªã„ã‚ˆã€‚ã‚†ã£ãã‚Šã§ã„ã„ã‚ˆã€‚"
];

const WelcomeScreen: React.FC = () => {
  const router = useRouter();

  // ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ å–å¾—
  const { nickname, loaded } = useUserSettings();

  // ãƒ©ãƒ³ãƒ€ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  const message = useMemo(() => {
    if (ENCOURAGE_MESSAGES.length === 0) return '';
    const idx = Math.floor(Math.random() * ENCOURAGE_MESSAGES.length);
    return ENCOURAGE_MESSAGES[idx];
  }, []);

  // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å¾Œ Today ã‚¿ãƒ–ã¸é·ç§»
  useEffect(() => {
    const timer = setTimeout(() => {
      router.replace('/(tabs)/today');
    }, 2600);

    return () => clearTimeout(timer);
  }, []);

  return (
    <LinearGradient
      colors={['#6366F1', '#3B82F6']}  // â† ç™’ã—ç³»ãƒ–ãƒ«ãƒ¼ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      style={styles.safeArea}
    >
      <SafeAreaView style={styles.safeArea}>
        <View style={styles.container}>
          {/* ä¸­å¤®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
          <View style={styles.centerContent}>

            {/* ğŸ‘‡ ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’ä½¿ã£ãŸæŒ¨æ‹¶ */}
            <Text style={styles.welcomeText}>
              {loaded
                ? nickname
                  ? `ãŠã‹ãˆã‚Šãªã•ã„ã€${nickname}ã•ã‚“`
                  : "ãŠã‹ãˆã‚Šãªã•ã„"
                : ""}
            </Text>

            {/* ã‚¢ãƒ—ãƒªå */}
            <Text style={styles.appName}>SereNote</Text>

            {message !== '' && (
              <Text style={styles.message}>{message}</Text>
            )}
          </View>

          {/* ä¸‹éƒ¨ */}
          <View style={styles.footer}>
            <Text style={styles.footerText}>ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ã—ã¦ã„ã¾ã™â€¦</Text>
          </View>
        </View>
      </SafeAreaView>
    </LinearGradient>
  );
};

export default WelcomeScreen;

const styles = StyleSheet.create({
  safeArea: {
    flex: 1,
  },
  container: {
    flex: 1,
    paddingHorizontal: 24,
    paddingVertical: 16,
    justifyContent: 'space-between',
  },
  centerContent: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  welcomeText: {
    fontSize: 20,
    fontWeight: '600',
    color: '#F1F5F9',
    marginBottom: 12,
  },
  appName: {
    fontSize: 32,
    fontWeight: '800',
    color: '#ffffff',
    letterSpacing: 0.5,
    marginBottom: 16,
  },
  message: {
    fontSize: 14,
    color: '#E0E7FF',
    textAlign: 'center',
    lineHeight: 20,
    opacity: 0.95,
  },
  footer: {
    alignItems: 'center',
    paddingBottom: 8,
  },
  footerText: {
    fontSize: 12,
    color: '#E0E7FF',
  },
});